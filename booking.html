<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Search Bus</title>
<style>
body{font-family:Arial;background:#f4f6f8}
.box{max-width:900px;margin:20px auto;background:#fff;padding:20px;border-radius:10px}
.bus{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding:15px;border:1px solid #ddd}
button{padding:10px 22px;background:#ffc107;border:none;font-weight:bold;cursor:pointer}
</style>
</head>

<body>

<div class="box">
  <h2>Search Bus</h2>
  <input id="from" placeholder="From">
  <input id="to" placeholder="To">
  <input id="date" type="date">
  <button onclick="search()">Search</button>
</div>

<div id="result" class="box"></div>

<script>
const TOTAL_SEATS = 36;

const buses=[
  {name:"Kashish AC Sleeper",route:"DHULE-PUNE",price:750},
  {name:"Kashish AC Sleeper",route:"PUNE-DHULE",price:750}
];

const key=(n,r,d)=>`${n}|${r}|${d}`;

function search(){
  const from=fromEl().value.toUpperCase();
  const to=toEl().value.toUpperCase();
  const date=dateEl().value;
  const route=from+"-"+to;
  result.innerHTML="";

  buses.forEach(b=>{
    if(b.route===route){
      const booked=JSON.parse(localStorage.getItem(key(b.name,route,date)))||[];
      const available=TOTAL_SEATS-booked.length;

      result.innerHTML+=`
      <div class="bus">
        <div>
          <b>${b.name}</b><br>
          Route: ${route}<br>
          Date: ${date}<br>
          Available Seats: <b>${available}</b>
        </div>
        <button onclick="openSeats('${b.name}','${route}','${b.price}','${date}')">
          View Seats
        </button>
      </div>`;
    }
  });
}

function openSeats(n,r,p,d){
  localStorage.setItem("busName",n);
  localStorage.setItem("route",r);
  localStorage.setItem("price",p);
  localStorage.setItem("busDate",d);
  location.href="seat.html";
}

const fromEl=()=>document.getElementById("from");
const toEl=()=>document.getElementById("to");
const dateEl=()=>document.getElementById("date");
</script>

</body>
</html>



